<Project>
  <!-- Forward to Microsoft.NET.Sdk -->
  <Import Sdk="Microsoft.NET.Sdk" Project="Sdk.targets" />

  <!--
    Referenced source generator is not copied to output on build.
    It causes error when merge option is enabled.
  -->
  <Target Name="CopyFGeneratorToOutput" AfterTargets="Build">
    <ItemGroup>
      <__FGenerator_DLL Include="@(Analyzer)" Condition=" '%(Filename)%(Extension)' == 'FGenerator.dll' " />
    </ItemGroup>
    <Copy
      SourceFiles="@(__FGenerator_DLL)"
      DestinationFiles="@(__FGenerator_DLL->'$(OutputPath)/%(Filename)%(Extension)')"
      SkipUnchangedFiles="true"
    />
  </Target>

</Project>
