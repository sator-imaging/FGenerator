<Project>
  <!-- Forward to Microsoft.NET.Sdk -->
  <Import Sdk="Microsoft.NET.Sdk" Project="Sdk.targets" />

  <!--
    Referenced source generator is not copied to output on build.
    It causes error when merge option is enabled.
  -->
  <Target Name="CopyFGeneratorToOutput" AfterTargets="Build">
    <ItemGroup>
      <__FGeneratorDll Include="@(ReferencePath)" Condition=" '%(Filename)' == 'FGenerator' " />
    </ItemGroup>
    <Copy
      SourceFiles="@(__FGeneratorDll)"
      DestinationFiles="@(__FGeneratorDll->'$(OutputPath)%(Filename)%(Extension)')"
      SkipUnchangedFiles="true"
    />
  </Target>

</Project>
